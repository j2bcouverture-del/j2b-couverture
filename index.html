<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>J2B Couverture | Couvreur √† Toul</title>
  <meta name="description" content="J2B Couverture : r√©novation de toiture, r√©paration de fuites, zinguerie, nettoyage/d√©moussage. Intervention : 54, 55, 57, 88. Devis gratuit.">

  <style>
    :root{
      --bg:#ffffff;
      --card:#f8fafc;
      --text:#0f172a;
      --muted:#475569;
      --border:#e5e7eb;
      --shadow:0 12px 30px rgba(2,6,23,.10);
      --radius:16px;
      --blue:#2563eb;
      --red:#dc2626;
      --max:1120px;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}
    .container{width:min(var(--max),92%);margin:auto}
    .muted{color:var(--muted)}
    .small{font-size:.95rem}
    p{line-height:1.65;margin:0 0 12px}
    h1,h2,h3{line-height:1.15}
    h1{font-size:clamp(2rem,4vw,3rem);margin:0 0 12px}
    h2{margin:0 0 10px}
    h3{margin:0 0 8px}

    header{
      position:sticky; top:0; z-index:50;
      background:#fff;
      border-bottom:1px solid var(--border);
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:14px 0;
    }
    .brand{display:flex;align-items:center;gap:12px;min-width:0}
    .brand img{height:64px;width:auto;display:block}

    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:12px 16px;border-radius:var(--radius);
      font-weight:900;border:0;cursor:pointer;
      box-shadow:var(--shadow);white-space:nowrap;
    }
    .btn.blue{background:var(--blue);color:#fff}
    .btn.red{background:var(--red);color:#fff}
    .btn.ghost{background:#fff;border:1px solid var(--border);box-shadow:none}

    /* Menu hamburger */
    .menuWrap{position:relative}
    .menuBtn{
      width:46px;height:46px;background:var(--blue);
      border-radius:14px;border:none;
      display:flex;flex-direction:column;justify-content:center;align-items:center;gap:5px;
      cursor:pointer;box-shadow:var(--shadow);
    }
    .menuBtn span{width:22px;height:3px;background:#fff;border-radius:3px}
    .menuPanel{
      position:absolute;right:0;top:calc(100% + 10px);
      width:min(300px, 86vw);
      background:#fff;border:1px solid var(--border);
      border-radius:16px;box-shadow:var(--shadow);
      padding:10px;display:none;z-index:200;
    }
    .menuPanel.open{display:block}
    .menuItem{display:block;padding:12px;border-radius:12px;font-weight:900;color:var(--text)}
    .menuItem:hover{background:var(--card)}

    /* Hero */
    .hero{padding:70px 0 34px;background:linear-gradient(to bottom,#fff,#f8fafc)}
    .heroGrid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px;align-items:start}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    .badges{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .badge{background:#fff;border:1px solid var(--border);border-radius:999px;padding:8px 10px;font-weight:900;color:var(--muted)}

    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .section{padding:56px 0}
    .section.alt{background:#f1f5f9}

    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:18px}
    .tile{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    .tile p{margin:0;color:var(--muted)}

    .split{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:18px}
    .list{margin:10px 0 0;padding-left:18px}
    .list li{margin:6px 0}

    /* Galerie */
    .gallery{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));gap:14px;margin-top:18px}
    .gallery img{
      width:100%;
      height:auto;
      aspect-ratio: 4 / 3;
      object-fit:cover;
      border-radius:12px;border:1px solid var(--border);
      box-shadow:0 8px 20px rgba(0,0,0,0.08);
      background:#fff;display:block;
    }
    @media (min-width: 900px){ .gallery{ grid-template-columns:repeat(3, minmax(0, 1fr)); } }
    @media (max-width: 420px){ .gallery{ grid-template-columns:1fr; } .gallery img{ aspect-ratio: 16 / 10; } }

    /* Form */
    .form{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
    label{display:flex;flex-direction:column;gap:6px;font-weight:900}
    input,textarea{padding:12px;border-radius:12px;border:1px solid var(--border);font-family:inherit;background:#fff}
    input:focus,textarea:focus{outline:none;border-color:rgba(37,99,235,.55)}
    .full{grid-column:1/-1}

    /* ===== Simulateur (place-holder propre : ne casse PAS la page) ===== */
    .simBar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .simLabel{font-weight:900}
    .simSwatches{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .swatchBtn{
      border:1px solid var(--border);
      background:#fff;
      border-radius:999px;
      padding:10px 12px;
      font-weight:900;
      cursor:pointer;
    }
    .swatchBtn.active{outline:3px solid rgba(37,99,235,.25);border-color: rgba(37,99,235,.35)}
    .simRow{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .simRange{flex:1;min-width:180px}
    .simCanvasWrap{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background:#fff;
      overflow:hidden;
      box-shadow: var(--shadow);
      margin-top:14px;
      position:relative;
    }
    #simCanvas,#maskCanvas{width:100%;height:auto;display:block}
    #maskCanvas{
      position:absolute;left:0;top:0;
      touch-action:none;
      cursor:crosshair;
      opacity:0;
      pointer-events:auto;
    }
    .simHint{
      margin-top:10px;
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius:12px;
      background:#fff;
      color:var(--muted);
      font-weight:700;
    }

    /* ===== Avis (carousel) ===== */
    .reviews-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom:14px;
    }
    .reviews-actions{display:flex; gap:10px; flex-wrap:wrap}
    .reviews{
      position:relative;
      display:grid;
      grid-template-columns:auto 1fr auto;
      gap:10px;
      align-items:center;
    }
    .rev-viewport{overflow:hidden; border-radius: var(--radius)}
    .rev-track{display:flex; gap:14px; transition: transform .35s ease; will-change: transform}
    .rev-card{
      flex: 0 0 100%;
      background:#fff;
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:16px;
    }
    .rev-top{display:flex; justify-content:space-between; gap:10px; margin-bottom:10px}
    .rev-who{display:flex; flex-direction:column; gap:4px}
    .rev-stars{letter-spacing:2px; color:#f59e0b; font-weight:900}
    .rev-badge{
      font-weight:900; font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: var(--card);
      color: var(--muted);
    }
    .rev-text{margin:0; color:var(--muted); font-weight:600; line-height:1.6}
    .rev-btn{
      width:46px; height:46px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      box-shadow: var(--shadow);
      cursor:pointer;
      font-weight:1000;
      font-size:24px;
      line-height:1;
    }
    .reviews-dots{display:flex; gap:8px; justify-content:center; margin-top:12px}
    .rev-dot{
      width:10px; height:10px; border-radius:999px;
      border:1px solid var(--border);
      background:#fff; cursor:pointer;
    }
    .rev-dot.active{background: var(--blue); border-color: rgba(37,99,235,.35)}
    @media (min-width: 900px){ .rev-card{ flex-basis: calc(50% - 7px); } }

    footer{background:#0f172a;color:#fff;padding:26px 0;margin-top:40px}
    footer a{color:#fff;text-decoration:underline}
    .call{
      position:fixed;right:16px;bottom:16px;
      background:var(--red);color:#fff;
      padding:14px 18px;border-radius:999px;
      font-weight:1000;box-shadow:var(--shadow);z-index:60;
    }
    @media(max-width:980px){
      .heroGrid,.grid3,.split,.form{grid-template-columns:1fr}
      .btn{width:100%}
      .brand img{height:54px}
      .reviews-actions{width:100%}
      .reviews-actions .btn{width:100%}
    }
  </style>
</head>

<body>

<header>
  <nav class="nav container">
    <div class="brand">
      <img src="./logo-temp.png?v=1000" alt="J2B Couverture" style="height:70px; width:auto; display:block;">
    </div>

    <div class="menuWrap">
      <button class="menuBtn" id="menuBtn" type="button" aria-expanded="false" aria-controls="menuPanel" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>

      <div class="menuPanel" id="menuPanel">
        <a class="menuItem" href="#services">Services</a>
        <a class="menuItem" href="#zone">Zone</a>
        <a class="menuItem" href="#avis">Avis</a>
        <a class="menuItem" href="#simulation">Simulateur</a>
        <a class="menuItem" href="#realisations">Photos</a>
        <a class="menuItem" href="#devis">Demande de devis</a>
        <a class="menuItem" href="#contact">Contact</a>
      </div>
    </div>
  </nav>
</header>

<main>

<section class="hero" id="top">
  <div class="container heroGrid">
    <div>
      <h1>R√©novation & r√©paration de toiture √† Toul</h1>
      <p class="muted">
        <strong>J2B Couverture</strong> r√©alise vos travaux de toiture : r√©novation, r√©paration de fuites,
        zinguerie, nettoyage/d√©moussage et entretien.
        <br><strong>Zones :</strong> 54 ‚Ä¢ 55 ‚Ä¢ 57 ‚Ä¢ 88 ‚Äî <strong>Devis gratuit</strong>.
      </p>

      <div class="cta">
        <a class="btn blue" href="#devis">üì© Demander un devis</a>
        <a class="btn red" href="tel:0601462612">üö® Appeler</a>
        <a class="btn ghost" href="#services">Voir les services</a>
      </div>

      <div class="badges">
        <span class="badge">‚úÖ Devis gratuit</span>
        <span class="badge">‚ö° Intervention rapide</span>
        <span class="badge">üß∞ Travail soign√©</span>
      </div>
    </div>

    <div class="card" id="contact">
      <h3>Contact</h3>
      <p class="muted" style="margin:0">
        <strong>T√©l :</strong> 06 01 46 26 12<br>
        <strong>Email :</strong> j2b.couverture@gmail.com<br>
        <strong>Secteurs :</strong> 54 ‚Ä¢ 55 ‚Ä¢ 57 ‚Ä¢ 88
      </p>
      <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn red" href="tel:0601462612">üìû Appeler</a>
        <a class="btn blue" href="#devis">üì© Devis</a>
      </div>
      <p class="muted small" style="margin-top:10px">R√©ponse rapide ‚Ä¢ Conseils clairs ‚Ä¢ Solutions durables</p>
    </div>
  </div>
</section>

<section id="services" class="section alt">
  <div class="container">
    <h2>Nos services</h2>
    <p class="muted">Des prestations claires, adapt√©es √† votre toiture.</p>

    <div class="grid3">
      <div class="tile"><h3>R√©novation de toiture</h3><p>R√©fection partielle ou compl√®te, tuiles, fa√Ætage, reprise d‚Äô√©tanch√©it√©.</p></div>
      <div class="tile"><h3>Fuites & urgences</h3><p>Recherche d‚Äôinfiltration et r√©paration rapide pour s√©curiser votre toit.</p></div>
      <div class="tile"><h3>Zinguerie</h3><p>Goutti√®res, rives, solins, noues ‚Äî finitions durables et propres.</p></div>
      <div class="tile"><h3>Nettoyage / d√©moussage</h3><p>Entretien, nettoyage pour prolonger la dur√©e de vie de la toiture.</p></div>
      <div class="tile"><h3>Isolation</h3><p>Am√©lioration du confort thermique et r√©duction des pertes d‚Äô√©nergie.</p></div>
      <div class="tile"><h3>Entretien</h3><p>Contr√¥le, pr√©vention, petites r√©parations avant gros d√©g√¢ts.</p></div>
    </div>
  </div>
</section>

<section id="zone" class="section">
  <div class="container">
    <h2>Zone d‚Äôintervention</h2>
    <p class="muted">
      Bas√© √† <strong>Toul</strong>, j‚Äôinterviens dans les d√©partements :
      <strong>54</strong> (Meurthe-et-Moselle), <strong>55</strong> (Meuse),
      <strong>57</strong> (Moselle), <strong>88</strong> (Vosges).
    </p>

    <div class="split">
      <div class="card">
        <h3>Ce que vous gagnez</h3>
        <ul class="list">
          <li>Devis clair et gratuit</li>
          <li>Travail soign√©</li>
          <li>Conseils selon votre toiture</li>
          <li>Intervention rapide</li>
        </ul>
      </div>
      <div class="card">
        <h3>Besoin urgent ?</h3>
        <p class="muted">Appelez directement, je vous r√©ponds d√®s que possible.</p>
        <a class="btn red" href="tel:0601462612">üìû 06 01 46 26 12</a>
      </div>
    </div>
  </div>
</section>

<!-- ‚úÖ AVIS CLIENTS (carousel + ton lien Google) -->
<section class="section alt" id="avis">
  <div class="container">
    <div class="reviews-head">
      <div>
        <h2>Avis clients</h2>
        <p class="muted">Ils recommandent J2B Couverture.</p>
      </div>

      <div class="reviews-actions">
        <a class="btn ghost" target="_blank" rel="noopener"
          href="https://www.google.com/search?client=safari&hs=FlKp&sca_esv=5b6dfac1f9c325dc&hl=fr-fr&sxsrf=ANbL-n62ur_WKn-GDD5VDqx9oKRNnPDPjg:1770837425075&q=avis+sur+j2b+couverture&uds=ALYpb_ncDc7jTlmw6Mmq7NjuX5c-hr95NtfnRQvAHKipv2vc_lOf-acaz5FbWkxMnjxipKiBlAaRfkPBX9D1b2yqeVGGEfl7ANrZpPFopSmwWCFgZZ0q5uaqUsGT75bNC8danE6rWhoLCnHicwhQ0MjO6kBXJtvlV3pkRYD8BrsmfzZvOvMTY1Y&si=AL3DRZEsmMGCryMMFSHJ3StBhOdZ2-6yYkXd_doETEE1OR-qOSjn9n8MPcPtvekjlStR1s5UeRjhFIcNq_BVvvxwXa1UH9NEtFGzj10um3lKvio-xFpeK3AAl7wqhovDnBCspfGLey2K&sa=X&ictx=1&biw=393&bih=695&dpr=3&sei=stWMadnJF7zLi-gPo7WDiAo&dlnr=1">
          ‚≠ê Voir tous les avis Google
        </a>
      </div>
    </div>

    <div class="reviews">
      <button class="rev-btn prev" type="button" aria-label="Avis pr√©c√©dent">‚Äπ</button>

      <div class="rev-viewport" aria-live="polite">
        <div class="rev-track" id="revTrack">
          <article class="rev-card">
            <div class="rev-top">
              <div class="rev-who">
                <strong>Client</strong>
                <span class="rev-stars" aria-label="5 √©toiles">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
              </div>
              <span class="rev-badge">Google</span>
            </div>
            <p class="rev-text">Travail tr√®s soign√©, intervention rapide. Je recommande.</p>
          </article>

          <article class="rev-card">
            <div class="rev-top">
              <div class="rev-who">
                <strong>Client</strong>
                <span class="rev-stars" aria-label="5 √©toiles">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
              </div>
              <span class="rev-badge">Google</span>
            </div>
            <p class="rev-text">Devis clair, √©quipe s√©rieuse et toiture nickel.</p>
          </article>

          <article class="rev-card">
            <div class="rev-top">
              <div class="rev-who">
                <strong>Client</strong>
                <span class="rev-stars" aria-label="5 √©toiles">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
              </div>
              <span class="rev-badge">Google</span>
            </div>
            <p class="rev-text">R√©paration de fuite efficace, bons conseils. Tr√®s pro.</p>
          </article>
        </div>
      </div>

      <button class="rev-btn next" type="button" aria-label="Avis suivant">‚Ä∫</button>
    </div>

    <div class="reviews-dots" id="revDots"></div>
  </div>
</section>

<!-- ‚úÖ SIMULATEUR (laiss√©, mais ne casse plus la page) -->
<section class="section" id="simulation">
  <div class="container">
    <h2>Simulateur couleur (toiture / fa√ßade)</h2>
    <p class="muted">1) Prenez une photo ‚Ä¢ 2) Dessinez la zone ‚Ä¢ 3) Choisissez une teinte (aucun t√©l√©chargement)</p>

    <div class="card">
      <div class="simBar">
        <span class="simLabel">Type :</span>
        <button class="swatchBtn active" type="button" data-preset="terre">Terre cuite</button>
        <button class="swatchBtn" type="button" data-preset="beton">Tuile b√©ton</button>
        <button class="swatchBtn" type="button" data-preset="facade">Fa√ßade</button>

        <label class="btn blue" style="cursor:pointer">
          üì∑ Prendre une photo
          <input id="simFile" type="file" accept="image/*" capture="environment" style="display:none">
        </label>

        <button class="btn ghost" id="maskClear" type="button">Effacer la zone</button>
        <button class="btn ghost" id="simReset" type="button">R√©initialiser</button>
      </div>

      <div class="simSwatches" id="simColors"></div>

      <div class="simRow">
        <span class="simLabel">Intensit√© :</span>
        <input class="simRange" id="simStrength" type="range" min="0" max="70" value="35">
        <span class="muted small" id="simStrengthLabel">35%</span>
      </div>

      <div class="simHint" id="simMsg">
        (Simulateur en cours d‚Äôam√©lioration) ‚Äî pour l‚Äôinstant, il ne doit pas emp√™cher l‚Äôaffichage des photos.
      </div>

      <div class="simCanvasWrap">
        <canvas id="simCanvas"></canvas>
        <canvas id="maskCanvas"></canvas>
      </div>
    </div>
  </div>
</section>

<!-- ‚úÖ PHOTOS / R√âALISATIONS -->
<section class="section alt" id="realisations">
  <div class="container">
    <h2>Nos r√©alisations</h2>
    <p class="muted">
      Quelques chantiers r√©alis√©s par <strong>J2B Couverture</strong> dans le 54, 55, 57 et 88.
    </p>

    <div class="gallery">
      <img src="./Temp1.jpg?v=1" alt="R√©alisation toiture 1" loading="lazy" decoding="async">
      <img src="./temp2.png?v=1" alt="R√©alisation toiture 2" loading="lazy" decoding="async">
      <img src="./temp3.png?v=1" alt="R√©alisation toiture 3" loading="lazy" decoding="async">
      <img src="./temp4.png?v=1" alt="R√©alisation toiture 4" loading="lazy" decoding="async">
      <img src="./temp6.JPG?v=1" alt="R√©alisation toiture 5" loading="lazy" decoding="async">
      <img src="./temp7.png?v=1" alt="R√©alisation toiture 6" loading="lazy" decoding="async">
      <img src="./Temp8.png?v=1" alt="R√©alisation toiture 7" loading="lazy" decoding="async">
    </div>
  </div>
</section>

<!-- ‚úÖ DEVIS -->
<section id="devis" class="section alt">
  <div class="container">
    <h2>Demande de devis</h2>
    <p class="muted">Remplissez le formulaire : l‚Äôapp Mail s‚Äôouvrira avec mon adresse d√©j√† remplie.</p>

    <form class="form" id="devisForm">
      <label>Nom
        <input name="name" required placeholder="Votre nom">
      </label>

      <label>T√©l√©phone
        <input name="phone" required placeholder="Votre num√©ro">
      </label>

      <label class="full">Message
        <textarea name="message" rows="5" required placeholder="Expliquez votre besoin (fuite, r√©novation, nettoyage...)"></textarea>
      </label>

      <button class="btn blue full" type="submit">üì© Envoyer la demande</button>
      <p class="muted small full" id="formHint"></p>
    </form>
  </div>
</section>

</main>

<footer>
  <div class="container">
    <div><strong>J2B Couverture</strong> ‚Äî Toul</div>
    <div style="margin-top:8px">
      T√©l : <a href="tel:0601462612">06 01 46 26 12</a> ‚Ä¢
      Email : <a href="mailto:j2b.couverture@gmail.com">j2b.couverture@gmail.com</a>
    </div>
    <div style="margin-top:8px;opacity:.9;font-size:.95rem">¬© <span id="year"></span> ‚Äî Tous droits r√©serv√©s.</div>
  </div>
</footer>

<a class="call" href="tel:0601462612">üìû Appeler</a>

<script>
  // Ann√©e
  document.getElementById("year").textContent = new Date().getFullYear();

  // Form devis -> ouvre Mail
  (function(){
    const form = document.getElementById("devisForm");
    const hint = document.getElementById("formHint");
    if(!form) return;

    form.addEventListener("submit", function(e){
      e.preventDefault();
      const d = new FormData(form);
      const name = String(d.get("name") || "");
      const phone = String(d.get("phone") || "");
      const message = String(d.get("message") || "");
      const to = "j2b.couverture@gmail.com";
      const subject = encodeURIComponent("Demande de devis - J2B Couverture");
      const body = encodeURIComponent(
        "Nom : " + name + "\n" +
        "T√©l√©phone : " + phone + "\n\n" +
        "Message :\n" + message
      );
      window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
      hint.textContent = "Si rien ne s‚Äôouvre, v√©rifiez que l‚Äôapp Mail est configur√©e.";
    });
  })();

  // Menu hamburger
  (function(){
    const btn = document.getElementById('menuBtn');
    const panel = document.getElementById('menuPanel');
    if(!btn || !panel) return;

    function close(){
      panel.classList.remove('open');
      btn.setAttribute('aria-expanded','false');
    }
    btn.addEventListener('click', (e)=>{
      e.stopPropagation();
      const open = panel.classList.toggle('open');
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
    document.addEventListener('click', close);
    panel.querySelectorAll('a').forEach(a => a.addEventListener('click', close));
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') close(); });
  })();

  // ‚úÖ Carousel avis (fl√®ches + points + auto)
  (function(){
    const track = document.getElementById('revTrack');
    const dotsWrap = document.getElementById('revDots');
    if(!track || !dotsWrap) return;

    const prev = document.querySelector('.rev-btn.prev');
    const next = document.querySelector('.rev-btn.next');
    const cards = Array.from(track.children);

    let index = 0;
    let timer = null;

    function perView(){ return window.matchMedia('(min-width: 900px)').matches ? 2 : 1; }
    function maxIndex(){ return Math.max(0, cards.length - perView()); }

    function buildDots(){
      dotsWrap.innerHTML = '';
      const count = maxIndex() + 1;
      for(let i=0;i<count;i++){
        const b = document.createElement('button');
        b.type = 'button';
        b.className = 'rev-dot' + (i===index ? ' active' : '');
        b.setAttribute('aria-label', 'Aller aux avis ' + (i+1));
        b.addEventListener('click', ()=>{ go(i); restart(); });
        dotsWrap.appendChild(b);
      }
    }
    function updateDots(){
      dotsWrap.querySelectorAll('.rev-dot').forEach((d,i)=>d.classList.toggle('active', i===index));
    }
    function go(i){
      index = Math.min(maxIndex(), Math.max(0, i));
      const gap = 14;
      const w = cards[0].getBoundingClientRect().width;
      track.style.transform = `translateX(${-((w + gap) * index)}px)`;
      updateDots();
    }
    function stop(){ if(timer) clearInterval(timer); timer=null; }
    function restart(){
      stop();
      timer = setInterval(()=> go(index >= maxIndex() ? 0 : index + 1), 4500);
    }

    prev?.addEventListener('click', ()=>{ go(index-1); restart(); });
    next?.addEventListener('click', ()=>{ go(index+1); restart(); });

    window.addEventListener('resize', ()=>{ buildDots(); go(index); });

    buildDots(); go(0); restart();
  })();
</script>

</body>
</html>
